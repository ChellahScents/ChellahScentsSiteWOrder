<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Order Services • Chellah Scents</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <script src="js/main.js" defer></script>
  <script src="js/order.js" defer></script>
</head>
<body>

  <!-- NAVBAR -->

  <main>
    <section class="order-section">
      <h2>Order Transcription · Translation · Subtitling</h2>

      <form id="order-form" enctype="multipart/form-data">
        <!-- languages -->
        <label>
          Original Language:
          <input list="allLangs" name="sourceLang" required>
          <datalist id="allLangs">
            <!-- abbreviated for brevity, fill with all world languages -->
            <option value="English"><option value="French"><option value="Arabic">
            <option value="Spanish"><option value="Mandarin"><option value="Hindi">
            <!-- … -->
          </datalist>
        </label>

        <label>
          Target Language(s):<br>
          <select name="targetLangs" multiple size="4" required>
            <option>English</option><option>French</option><option>Arabic</option>
          </select>
          <small>Ctrl/Cmd + click to select more</small>
        </label>

        <!-- services -->
        <fieldset>
          <legend>Select Service(s)</legend>
          <label><input type="checkbox" name="service" value="translation"> Translation</label>
          <label><input type="checkbox" name="service" value="transcription"> Transcription</label>
          <label><input type="checkbox" name="service" value="subtitling"> Subtitle (SRT)</label>
        </fieldset>

        <!-- dynamic fields -->
        <div id="translation-fields" class="hidden">
          <label>Word Count (approx.):<br>
            <input type="number" name="wordCount" min="0" value="0">
          </label>
        </div>
        <div id="audio-fields" class="hidden">
          <label>Audio/Video Length (minutes):<br>
            <input type="number" name="lengthMin" min="0" value="0">
          </label>
        </div>

        <!-- file upload -->
        <label>Upload your files:<br>
          <input type="file" name="attachments" multiple>
        </label>

        <!-- additional notes -->
        <label>Additional Instructions:<br>
          <textarea name="notes" rows="4"></textarea>
        </label>

        <!-- price display -->
        <p><strong>Total: $<span id="total-price">0.00</span></strong></p>

        <!-- PayPal Smart Buttons (accept cards + PayPal) -->
        <div id="paypal-button-container"></div>
      </form>

      <p class="eta-notice">
        Once you click Pay, our usual turnaround is <strong>24–48 hours</strong>. Rush jobs? Email <a href="mailto:mbounejmate@gmail.com">mbounejmate@gmail.com</a>.
      </p>
    </section>
  </main>

  <!-- FOOTER -->

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=BAATnBGQXYI0HMbpx7ZaSd6JZ3g0lyXYzc8g9Ew-016JDolN8YbMVuqlRiL682Ka3ArrULuJ_xz-xziw-8&components=hosted-buttons&disable-funding=venmo&currency=USD"></script>
  <script>
    // Render PayPal Buttons when order.js sets up amount
    paypal.Buttons({
      style: { color:'gold', shape:'pill', label:'pay' },
      onInit: function(data, actions) {
        // disable until we calculate
        actions.disable();
        window.addEventListener('orderChanged', () => {
          const total = window.CHELLAH_TOTAL || 0;
          if (total > 0) actions.enable();
        });
      },
      createOrder: function(data, actions) {
        const total = window.CHELLAH_TOTAL.toFixed(2);
        return actions.order.create({
          purchase_units: [{
            description: 'Chellah Scents Services',
            amount: { value: total }
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(details => {
          // here you could send details to your server or call Formspree
          alert('Thank you, '+ details.payer.name.given_name +'! Order placed.');
        });
      }
    }).render('#paypal-button-container');
  </script>

</body>
</html>